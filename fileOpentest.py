import os
from collections import namedtuple

os.chdir("D:\My Files\School Work\Winter 2018\ENG 4350 WINTER\P5")

Station = ""

while Station == "":
    STNFILE = input("Input file name to open: ")
    try:
        with open(STNFILE, "r") as file:
            data = file.readlines()
        file.close()

        #array of required elements for structure    
        elements = ["name","stnlat","stnlong","stnalt","utc_offset","az_el_nlim", "az_el_lim","st_az_speed_max","st_el_speed_max"]
        #array of required elements for angles structure
        az = ["az", "elmin", "elmax"]

        Elements_tuple = namedtuple ('station_info', elements)
        Angles_tuple = namedtuple ('angle_limits', az)

        #a_list = []

        #for i in range (6, 6)
        lims = data[6].split(",")
        lims = [float(j) for j in lims]
        limits = (Angles_tuple(lims[0], lims[1],lims[2]))
        Station = Elements_tuple(str(data[0]),float(data[1]),float(data[2]),float(data[3]) \
                                    ,float(data[4]), float(data[5]), limits,float(data[7]),float(data[8]))
        #creating final structure (tuple) called station 
        print(limits)
        print(Station)


    except:
        print(f"File does not exist: {STNFILE}")
        Station =""

'''
    #opening file for reading
    station = ''
    while station == '':
        #STNFIL = input("\nInput the station file name:\n")
        #try:
        f = open("STNFIL.txt", 'r')
        
        #array of required elements for structure
        elements = ["name","stnlat","stnlong","stnalt","utc_offset","az_el_nlim",
                        "az_el_lim","st_az_speed_max","st_el_speed_max"]

        #array of required elements for angles structure
        az = ["az", "elmin", "elmax"]

        #reading textfile and then closing it 
        data = f.readlines()
        f.close()
        
        #creating 2 structures with associated elements    
        Elements_tuple = namedtuple ('station_info', elements)
        Angles_tuple = namedtuple ('angle_limits', az)


        a_list =[]

        #creating tuple with angle limits
        for i in range (6, 6+int(data[5])):
            lims = data[i].split(',')
            [float(j) for j in lims]
            #a_list.append(Angles_tuple((*(lims))))
            a_list.append(Angles_tuple(lims))

        #creating final structure (tuple) called station 
        Station = Elements_tuple(str(data[0]),float(data[1]),float(data[2]),float(data[3]) \
                                    ,float(data[4]), float(data[5]), a_list,float(data[7]),float(data[8]))

        return Station
        #except:
            #errmsg("File Not found! Please try again")
            #station =''
'''